var StreamPlayer=function(e,s){if("string"==typeof e&&(e=document.getElementById(e)),e){var a=e.getElementsByTagName("div")[0];this.init(e,a,s||{}),this.setup()}};StreamPlayer.prototype.init=function(e,s,a){this.callback=a.callback||null,this.displayUpdate=a.displayUpdate||null,this.playCallback=a.playCallback||null,this.pauseCallback=a.pauseCallback||null,this.stopCallback=a.stopCallback||null,this.updateCallback=a.updateCallback||null,this.nextCallback=a.nextCallback||null,this.previousCallback=a.previousCallback||null,this.ffCallback=a.ffCallback||null,this.fbCallback=a.fbCallback||null,this.soundCallback=a.soundCallback||null,this.refreshCallback=a.refreshCallback||this.refreshCallback,this.current_time=a.current_time||null,this.play_mode=a.play_mode||"DATA_BY_DATA",this.read_frequency=a.read_frequency||1e3,this.data_interval=a.data_interval||1e3,this.player=e,this.handle=s,this.options=a,this.refreshIntervalId=null,this.buffer_count=0,this.buffered_data=[],this.current_value=null,this.auto_start=this.getOption("auto_start",!0),this.is_playing=this.auto_start,this.is_buffering=this.getOption("is_buffering",!1),this.current_speed=this.getOption("current_speed",1e3),this.buffered_pause=!0,this.addListeners(),this.min_speed=a.min_speed||4e3,this.max_speed=a.max_speed||100,this.min_time=a.min_time||0,this.max_time=a.max_time||-1,self=this},StreamPlayer.prototype.addListeners=function(){this.player.onclick=function(e){-1!=e.target.className.search(/(^|\s)stop(\s|$)/)&&"function"==typeof self.stopCallback?(self.stopCallback(self),self.update()):-1!=e.target.className.search(/(^|\s)play(\s|$)/)&&"function"==typeof self.playCallback?(self.playCallback(self),e.target.className=e.target.className.replace(/\s?play/g,""),e.target.className+=" pause",self.is_buffering=!1,self.is_playing=!self.is_playing,self.refreshIntervalId=setInterval(function(){self.updateCallback(self),self.update()},self.current_speed)):-1!=e.target.className.search(/(^|\s)pause(\s|$)/)&&"function"==typeof self.pauseCallback?(self.pauseCallback(),e.target.className=e.target.className.replace(/\s?pause/g,""),e.target.className+=" play",clearInterval(self.refreshIntervalId),self.is_playing=!self.is_playing,self.update()):-1!=e.target.className.search(/(^|\s)next(\s|$)/)&&"function"==typeof self.nextCallback?(self.nextCallback(self),self.update()):-1!=e.target.className.search(/(^|\s)prev(\s|$)/)&&"function"==typeof self.previousCallback?(self.previousCallback(self),self.update()):-1!=e.target.className.search(/(^|\s)ff(\s|$)/)&&"function"==typeof self.ffCallback?(self.current_speed>self.max_speed&&("DATA_BY_DATA"==self.play_mode&&(self.current_speed=self.current_speed/2>self.max_speed?self.current_speed/2:self.max_speed),self.is_playing&&(clearInterval(self.refreshIntervalId),self.refreshIntervalId=setInterval(function(){self.updateCallback(self),self.update()},self.current_speed)),e.target.className.replace(/\s?disabled/g,""),self.ffCallback(),document.getElementsByClassName("fb")[0].className=document.getElementsByClassName("fb")[0].className.replace(/\s?disabled/g,""),document.getElementsByClassName("fb")[0].disabled=!1),self.current_speed<=self.max_speed&&-1==e.target.className.search(/(^|\s)disabled(\s|$)/)&&(e.target.className+=" disabled",e.target.disabled=!0)):-1!=e.target.className.search(/(^|\s)fb(\s|$)/)&&"function"==typeof self.fbCallback?(self.current_speed<self.min_speed&&(self.current_speed=2*self.current_speed<self.min_speed?2*self.current_speed:self.min_speed,self.is_playing&&(clearInterval(self.refreshIntervalId),self.refreshIntervalId=setInterval(function(){self.updateCallback(self),self.update()},self.current_speed)),e.target.className.replace(/\s?disabled/g,""),self.fbCallback(),document.getElementsByClassName("ff")[0].className=document.getElementsByClassName("ff")[0].className.replace(/\s?disabled/g,""),document.getElementsByClassName("ff")[0].disabled=!1),self.current_speed==self.min_speed&&-1==e.target.className.search(/(^|\s)disabled(\s|$)/)&&(e.target.className+=" disabled",e.target.disabled=!0)):-1!=e.target.className.search(/(^|\s)soundon(\s|$)/)&&"function"==typeof self.soundCallback?(e.target.className=e.target.className.replace(/\s?soundon/g,""),e.target.className+=" soundoff",self.soundCallback(!1)):-1!=e.target.className.search(/(^|\s)soundoff(\s|$)/)&&"function"==typeof self.pauseCallback&&(e.target.className=e.target.className.replace(/\s?soundoff/g,""),e.target.className+=" soundon",self.soundCallback(!0),self.update()),self.refreshCallback(self)}},StreamPlayer.prototype.setup=function(){this.addListeners(),this.update(),self.current_speed==self.min_speed&&document.getElementsByClassName("fb").length>1&&-1==document.getElementsByClassName("fb")[0].className.search(/(^|\s)disabled(\s|$)/)&&(document.getElementsByClassName("fb")[0].className+=" disabled",document.getElementsByClassName("fb")[0].disabled=!1),self.current_speed==self.min_speed&&document.getElementsByClassName("fb").length>1&&-1==document.getElementsByClassName("fb")[0].className.search(/(^|\s)disabled(\s|$)/)&&(document.getElementsByClassName("fb")[0].className+=" disabled",document.getElementsByClassName("fb")[0].disabled=!1),"function"==typeof self.current_time&&0==self.current_time()?document.getElementsByClassName("prev").length>0&&-1==document.getElementsByClassName("prev")[0].className.search(/(^|\s)disabled(\s|$)/)&&(document.getElementsByClassName("prev")[0].className+=" disabled",document.getElementsByClassName("prev")[0].disabled=!0):document.getElementsByClassName("prev").length>0&&1==document.getElementsByClassName("prev")[0].className.search(/(^|\s)disabled(\s|$)/)&&(document.getElementsByClassName("prev")[0].className.replace(/\s?disabled/g,""),document.getElementsByClassName("prev")[0].disabled=!1)},StreamPlayer.prototype.getOption=function(e,s){return void 0!==this.options[e]?this.options[e]:s},StreamPlayer.prototype.update=function(){if(self.auto_start&&"function"==typeof self.updateCallback&&null==self.refreshIntervalId&&(self.refreshIntervalId=setInterval(function(){self.updateCallback(self),self.update()},self.current_speed)),"function"==typeof self.current_time&&self.current_time()==self.min_time?document.getElementsByClassName("prev").length>0&&-1==document.getElementsByClassName("prev")[0].className.search(/(^|\s)disabled(\s|$)/)&&(document.getElementsByClassName("prev")[0].className+=" disabled",document.getElementsByClassName("prev")[0].disabled=!0):document.getElementsByClassName("prev").length>0&&document.getElementsByClassName("prev")[0].className.search(/(^|\s)disabled(\s|$)/)>0&&(document.getElementsByClassName("prev")[0].className=document.getElementsByClassName("prev")[0].className.replace(/\s?disabled/g,""),document.getElementsByClassName("prev")[0].disabled=!1),"function"==typeof self.current_time&&self.current_time()==self.max_time){if(document.getElementsByClassName("next").length>0&&-1==document.getElementsByClassName("next")[0].className.search(/(^|\s)disabled(\s|$)/)&&(document.getElementsByClassName("next")[0].className+=" disabled",document.getElementsByClassName("next")[0].disabled=!0),self.is_playing){self.pauseCallback();var e=document.getElementsByClassName("pause")[0];e.className=e.className.replace(/\s?pause/g,""),e.className+=" play",clearInterval(self.refreshIntervalId),self.is_playing=!self.is_playing,self.update()}}else document.getElementsByClassName("next").length>0&&document.getElementsByClassName("next")[0].className.search(/(^|\s)disabled(\s|$)/)>0&&(document.getElementsByClassName("next")[0].className=document.getElementsByClassName("next")[0].className.replace(/\s?disabled/g,""),document.getElementsByClassName("next")[0].disabled=!1);self.refreshCallback(self)},StreamPlayer.prototype.refreshCallback=function(){};