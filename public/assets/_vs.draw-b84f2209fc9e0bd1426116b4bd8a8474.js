!function(t){t.fn._vs.draw={settings:{draw:{trail:1,showLayout:!1}},update:function(t){1==this.settings.draw.trail?t.ctx.clearRect(0,0,t.ctx.canvas.clientWidth,t.ctx.canvas.clientHeight):debugDrawChart(0,0,ctx.canvas.clientWidth,ctx.canvas.clientHeight,"rgba(255,255,255,"+this.settings.draw.trail+")",ctx);for(var e=t.world.GetBodyList();e;e=e.GetNext())for(var a=e.GetFixtureList();null!=a;a=a.GetNext())this.drawShape(t,a);1==this.settings.draw.showLayout&&this.debugDrawChart(chart.position.x,chart.position.y,chart.position.width,chart.position.height,"rgba(255,0,0,0.2)",ctx)},debugDrawChart:function(t,e,a,r,s,i){i.save(),i.translate(0,0),i.fillStyle=s,i.beginPath(),i.rect(t,e,a,r),i.closePath(),i.strokeStyle="#000",i.lineWidth=.5,i.stroke(),i.restore()},showTexture:function(t,e){"undefined"!=typeof t.m_userData.texture&&"undefined"!=typeof t.m_userData.texture.pattern&&(e.fillStyle=t.m_userData.texture.pattern,e.fill())},drawShape:function(t,e){var a=e.GetBody(),r=a.GetPosition(),s=a.GetAngle(),i=9,l=10,c=t.settings.options.scale;if(e.m_userData.x=a.GetWorldCenter().x*c,e.m_userData.y=a.GetWorldCenter().y*c,"undefined"!=typeof e)switch(e.GetType()){case 0:switch(e.m_userData){case null:t.ctx.fillStyle="rgba(255,0,0,1)";break;default:t.ctx.fillStyle=e.m_userData.fillStyle}var n=e.m_shape.m_radius;if(1==t.settings.sedimentation.token.visible){t.ctx.save(),t.ctx.translate(r.x*c,r.y*c),t.ctx.rotate(s),t.ctx.beginPath();var o=n/l*i*c;t.ctx.strokeStyle="undefined"!=typeof e.m_userData.strokeStyle?e.m_userData.strokeStyle:"rgba(0,0,0,0)",t.ctx.lineWidth="undefined"!=typeof e.m_userData.lineWidth?e.m_userData.lineWidth:0,t.ctx.arc(0,0,o,0,2*Math.PI,!0),t.ctx.closePath(),1==t.settings.options.layout?(t.ctx.strokeStyle="#000",t.ctx.lineWidth=.5,t.ctx.stroke()):(t.ctx.fill(),t.ctx.stroke(),this.showTexture(e,t.ctx)),t.ctx.restore()}break;case 1:switch(e.m_userData){case null:t.ctx.fillStyle="rgba(255,0,0,1)";break;default:t.ctx.fillStyle=e.m_userData.fillStyle}{e.m_shape.m_vertices[0].x*c,e.m_shape.m_vertices[0].y*c,r.x*c-e.m_shape.m_vertices[0].x*c,r.y*c-e.m_shape.m_vertices[0].y*c}t.ctx.save(),t.ctx.translate(r.x*c,r.y*c),t.ctx.rotate(s),t.ctx.beginPath(),t.ctx.strokeStyle="undefined"!=typeof e.m_userData.strokeStyle?e.m_userData.strokeStyle:e.m_userData.fillStyle,t.ctx.lineWidth="undefined"!=typeof e.m_userData.lineWidth?e.m_userData.lineWidth:0;for(var x=0;x<e.m_shape.m_vertices.length;x++){var u=e.m_shape.m_vertices;t.ctx.moveTo(u[0].x*c,u[0].y*c);for(var h=1;h<u.length;h++)t.ctx.lineTo(u[h].x*c,u[h].y*c);t.ctx.lineTo(u[0].x*c,u[0].y*c)}t.ctx.closePath(),t.ctx.fill(),this.showTexture(e,t.ctx),1==t.settings.options.layout?(t.ctx.lineWidth=.25,t.ctx.strokeStyle="rgb(0,0,0)",t.ctx.stroke()):t.ctx.stroke(),t.ctx.restore();break;case 2:}if("undefined"!=typeof e.m_userData.callback&&"function"==typeof e.m_userData.callback.draw){var d=t.select("ID",e.m_userData.ID);e.m_userData.callback.draw(d)}}}}(jQuery);