(function(){if(function(){try{appsnackWindowObj=window;var c=!1;if("undefined"==typeof top.location.href)throw"Error";}catch(h){c=!0}this.isSameDomain=!c;return c}())return window;windowContext=top!=window?top:window})();EXPO=windowContext.EXPO;
"undefined"==typeof EXPO&&(EXPO=function(c){var h=this;instanceOf=function(c,h){return c&&c.hasOwnProperty&&c instanceof h};instanceOf(h,EXPO)?h._init(c):h=new EXPO(c);return h},windowContext.EXPO=EXPO,function(){var c={},h={},l={},g=g||{},m={debug:function(){}},d={addedLogger:function(a){for(var b={},f=windowContext.location.search.substring(1).split("&"),k=0;k<f.length;k++){var e=f[k].split("=");b[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}a.logLevel=b.level||2;"true"===b.debug&&a.dependencies&&
(a.dependencies.unshift({type:"plugin",name:"logger"}),a.jsFiles.unshift("logger.js"))},addedJsFileInQueue:function(a){for(var b=a.length,f=0;f<b;f++)l[a[f]]=!1},setPluginsRenderVersion:function(a){if(-1===a.richmediaCommonDir.indexOf("$RICHMEDIA")&&""!==a.richmediaCommonDir){var b=a.richmediaCommonDir.split("plugins/")[1].split("/")[0];a.render_version=a.plugin_version=b}},constructMediaPath:function(a){0<=a.richmediaCommonDir.indexOf("$RICHMEDIA")&&(a.richmediaCommonDir="");var b=a.jsFiles,f=b.length;
if(0<f)for(var k=0;k<f;k++)/^http(s)*:\/\//i.test(b[k])||(b[k]=a.richmediaCommonDir+b[k])},isRenderAnyAdUnit:function(){for(adunit_name in g)if(!1===g[adunit_name].is_loaded){adunit_dependencies=g[adunit_name].dependencies;adunit_dependencies_cnt=adunit_dependencies.length;isInitAdUnitRendering=!0;for(var a=0;a<adunit_dependencies_cnt;a++)if("completed"!==c[adunit_dependencies[a]]){m.debug(c);isInitAdUnitRendering=!1;break}isInitAdUnitRendering&&d.initRenderingAdUnits(g[adunit_name])}},loadJSFiles:function(){var a=
!1;for(key in c)if("completed"!==c[key]){a=!0;break}if(a){var a=function(){l[this.name]="completed"},b=function(){l[this.name]=!1},f=function(){l[this.name]=!1};for(jsFileUrl in l){l[jsFileUrl]="inprogress";var k={};k.name=jsFileUrl;"completed"!==l[jsFileUrl]&&d.loadJSFile(jsFileUrl,a,b,f,k)}}else d.isRenderAnyAdUnit()},createProxy:function(a,b){var f=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,Array.prototype.slice.call(arguments,0).concat(f))}},loadJSFile:function(a,
b,f,k,e){var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("charset","utf-8");c.setAttribute("src",a);c.onload=d.createProxy(b,e);c.onerror=d.createProxy(f,e);c.onabort=d.createProxy(k,e);document.getElementsByTagName("head")[0].appendChild(c)},addedAdUnitDependencies:function(a,b,f){for(var k=[],e="",h=a.length,d=0;d<h;d++)if(!a[d].name.match(/^test/)||Boolean(a[d].name.match(/^test/))&&"dev"===EXPO.ENV)e="plugin"===a[d].type?"plugins_"+b+"_"+a[d].name:
"renderer_"+f+"_"+a[d].name,k.push(e),"undefined"===typeof c[e]&&(c[e]=!1);return k},initRenderingAdUnits:function(a){var b={},f=[],c,e=a.dependencies;b.coreConfig=cfg=a.coreConfig;b.sharedCoreObj=d.sharedWithSandbox;for(var g=0;g<e.length;g++)if(e[g].match(/_test/))f.push(e[g]);else if(e[g].match(/render/))e[g].match(/render/)&&(c=e[g]);else h[e[g]](b);e={pixel_info:a.coreConfig.pixelInfo};e.teaser=a.coreConfig.teaser.trackers;b.tracker.setProperties(e);a.coreConfig.isCountAfterPlay||(e.teaser.impression.imp.trackers.shift(),
b.tracker.setProperties(e),b.tracker.firePixels(e.teaser.impression.imp));b.tracker.firePixel({type:"img",pixel:"load"});d.setWindowContext(b.framebuster.getWindowContext());h[c](b);a.is_loaded=!0;a.coreConfig.init_load_callback(b);if("dev"==a.coreConfig.env&&0<f.length)for(a=0;a<f.length;a++)h[f[a]](b)},setWindowContext:function(a){windowContext=windowContext||a;windowContext.EXPO=windowContext.EXPO||EXPO}};EXPO.registerPlugin=function(a,b,c){EXPO.updateDependencyStatus("plugins",c,a,b);d.isRenderAnyAdUnit();
return b};EXPO.registerRenderer=function(a,b,c){EXPO.updateDependencyStatus("renderer",c,a,b);d.isRenderAnyAdUnit();return b};EXPO.addedAdUnitsDependenciesStatus=function(a,b,c,d){for(name in g);};EXPO.updateDependencyStatus=function(a,b,d,g){c[a+"_"+b+"_"+d]="completed";h[a+"_"+b+"_"+d]=g};EXPO.getDependencies=function(){console.log("this is our get dependencies method");return c};EXPO.prototype={_init:function(a){"object"===typeof a&&(this.coreConfig=a,a.loaded=!0,g[a.name]=this)},initAdUnit:function(){g[this.coreConfig.name]=
this;g[this.coreConfig.name].is_loaded=!1;EXPO.ENV=this.coreConfig.env;d.addedLogger(this.coreConfig);d.constructMediaPath(this.coreConfig);d.setPluginsRenderVersion(this.coreConfig);g[this.coreConfig.name].dependencies=d.addedAdUnitDependencies(this.coreConfig.dependencies,this.coreConfig.plugin_version,this.coreConfig.render_version);d.addedJsFileInQueue(this.coreConfig.jsFiles);d.loadJSFiles()}}}());
(function(){window.tf_richmedia=window.tf_richmedia||[];windowContext.tf_richmedia=windowContext.tf_richmedia||[];windowContext!==window&&windowContext.tf_richmedia.push(window.tf_richmedia[0]);for(var c=windowContext.tf_richmedia.length,h=0;h<c;h++)window.tf_richmedia.length&&!windowContext.tf_richmedia[h].loaded&&EXPO(window.tf_richmedia[h]).initAdUnit()})();
